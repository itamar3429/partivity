version: "3.4"

services:
   static:
      container_name: static
      image: partivity-static-prod
      restart: always
      build:
         context: client
         dockerfile: ./Dockerfile.prod
      environment:
         NODE_ENV: production
         PORT: 3000
      ports:
         - 3000:3000
   api:
      container_name: api
      image: partivity-api-prod
      restart: always
      build:
         context: server
         dockerfile: ./Dockerfile.prod
      env_file: server/.env
      environment:
         NODE_ENV: production
         PORT: 5000
      ports:
         - 5000:5000
